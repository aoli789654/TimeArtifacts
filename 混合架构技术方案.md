# ã€Šæ—¶å…‰ä¿¡ç‰©ã€‹æ··åˆæ¶æ„æŠ€æœ¯æ–¹æ¡ˆ

## ğŸ¯ æ¶æ„æ¦‚è¿°

é‡‡ç”¨**C++åç«¯ + Webå‰ç«¯**çš„æ··åˆæ¶æ„ï¼Œå……åˆ†å‘æŒ¥ä¸¤ç§æŠ€æœ¯æ ˆçš„ä¼˜åŠ¿ï¼š
- **C++åç«¯**ï¼šé«˜æ€§èƒ½æ¸¸æˆé€»è¾‘å¤„ç†ã€æ•°æ®ç®¡ç†ã€éŸ³é¢‘å¤„ç†
- **Webå‰ç«¯**ï¼šç°ä»£åŒ–UIç•Œé¢ã€ä¸°å¯Œçš„è§†è§‰æ•ˆæœã€è·¨å¹³å°å…¼å®¹

---

## ğŸ”§ æŠ€æœ¯æ ˆè¯¦è§£

### åç«¯æŠ€æœ¯æ ˆ (C++)
```cpp
// æ ¸å¿ƒæ¡†æ¶
- C++17/20 æ ‡å‡†
- nlohmann/json (JSONå¤„ç†)
- websocketpp (WebSocketæœåŠ¡å™¨) ğŸ†•
- SFML Audio (éŸ³é¢‘å¤„ç†)
- CMake (æ„å»ºç³»ç»Ÿ)

// å¯é€‰å¢å¼ºåº“
- crow/drogon (HTTPæœåŠ¡å™¨ï¼Œå¦‚éœ€REST API)
- spdlog (æ—¥å¿—ç³»ç»Ÿ)
```

### å‰ç«¯æŠ€æœ¯æ ˆ (Web)
```javascript
// åŸºç¡€æŠ€æœ¯
- HTML5 + CSS3 + ES6+
- WebSocket API (å®æ—¶é€šä¿¡)
- Canvas API (å¯é€‰ï¼Œç”¨äºç‰¹æ•ˆ)

// ç°ä»£åŒ–å·¥å…· (æ¸è¿›å¼é‡‡ç”¨)
- Node.js (å¼€å‘å·¥å…·é“¾)
- Vite/Webpack (æ‰“åŒ…å·¥å…·)
- TypeScript (ç±»å‹å®‰å…¨ï¼Œå¯é€‰)
- Tailwind CSS (æ ·å¼æ¡†æ¶ï¼Œå¯é€‰)

// UIå¢å¼ºåº“ (æŒ‰éœ€é€‰æ‹©)
- anime.js (åŠ¨ç”»æ•ˆæœ)
- typed.js (æ‰“å­—æœºæ•ˆæœ)
- particles.js (èƒŒæ™¯ç²’å­æ•ˆæœ)
```

---

## ğŸ“¡ é€šä¿¡æœºåˆ¶è®¾è®¡

### 1. WebSocketå®æ—¶é€šä¿¡
```javascript
// å‰ç«¯ JavaScript
class GameClient {
    constructor() {
        this.ws = new WebSocket('ws://localhost:8080');
        this.setupEventHandlers();
    }
    
    setupEventHandlers() {
        this.ws.onmessage = (event) => {
            const message = JSON.parse(event.data);
            this.handleGameMessage(message);
        };
    }
    
    sendCommand(action, data) {
        const message = {
            type: 'command',
            action: action,
            data: data,
            timestamp: Date.now()
        };
        this.ws.send(JSON.stringify(message));
    }
}
```

```cpp
// åç«¯ C++
class WebSocketHandler {
private:
    GameEngine* gameEngine;
    
public:
    void onMessage(const std::string& message) {
        nlohmann::json jsonMsg = nlohmann::json::parse(message);
        
        if (jsonMsg["type"] == "command") {
            std::string action = jsonMsg["action"];
            auto data = jsonMsg["data"];
            
            // è½¬å‘ç»™æ¸¸æˆå¼•æ“å¤„ç†
            auto result = gameEngine->processCommand(action, data);
            
            // å‘é€å“åº”
            sendResponse(result);
        }
    }
};
```

### 2. APIæ¶ˆæ¯æ ¼å¼è§„èŒƒ
```json
{
    "messageTypes": {
        "gameState": {
            "type": "gameState",
            "data": {
                "currentLocation": "bookstore",
                "playerAttributes": {"observation": 3, "empathy": 2},
                "inventory": ["old_diary", "mysterious_key"],
                "availableActions": ["examine_bookshelf", "talk_to_owner"]
            }
        },
        "dialogue": {
            "type": "dialogue",
            "data": {
                "speaker": "ä¹¦åº—è€æ¿",
                "text": "æ¬¢è¿æ¥åˆ°æ—¶å…‰è§’è½...",
                "options": [
                    {"id": "option1", "text": "è¯¢é—®å…³äºæ—§ä¹¦çš„äº‹æƒ…"},
                    {"id": "option2", "text": "[è§‚å¯Ÿ] æ³¨æ„åˆ°ä»–çœ¼ä¸­çš„å¿§ä¼¤"}
                ]
            }
        },
        "sceneUpdate": {
            "type": "sceneUpdate",
            "data": {
                "location": "bookstore",
                "description": "ä¹¦åº—å†…äº®èµ·äº†æš–é»„è‰²çš„ç¯å…‰...",
                "ambientEffects": ["gentle_rain", "page_turning"],
                "musicTrack": "bookstore_evening"
            }
        }
    }
}
```

---

## ğŸ¨ å‰ç«¯UIè®¾è®¡æ–¹æ¡ˆ

### 1. ç•Œé¢å¸ƒå±€è®¾è®¡
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶å…‰ä¿¡ç‰©</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div id="game-container">
        <!-- ä¸»è¦æ•…äº‹åŒºåŸŸ -->
        <div id="story-panel" class="panel">
            <div id="location-header"></div>
            <div id="scene-description"></div>
            <div id="story-content"></div>
        </div>
        
        <!-- å¯¹è¯åŒºåŸŸ -->
        <div id="dialogue-panel" class="panel">
            <div id="speaker-name"></div>
            <div id="dialogue-text"></div>
            <div id="dialogue-options"></div>
        </div>
        
        <!-- çŠ¶æ€ä¿¡æ¯æ  -->
        <div id="status-panel" class="panel">
            <div id="player-attributes"></div>
            <div id="inventory-summary"></div>
            <div id="current-location"></div>
        </div>
        
        <!-- æ—¥è®°ç³»ç»Ÿ -->
        <div id="journal-panel" class="panel hidden">
            <div id="journal-content"></div>
        </div>
    </div>
    
    <script src="js/main.js"></script>
</body>
</html>
```

### 2. CSSæ ·å¼ç³»ç»Ÿï¼ˆæ”¯æŒä¸»é¢˜åˆ‡æ¢ï¼‰
```css
/* ä¸»é¢˜å˜é‡ */
:root {
    --bg-primary: #1a1a1a;
    --bg-secondary: #2d2d2d;
    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --accent-color: #d4af37;
    --border-color: #404040;
}

/* æ€€æ—§ä¸»é¢˜ */
[data-theme="vintage"] {
    --bg-primary: #2c1810;
    --bg-secondary: #3d241a;
    --text-primary: #f4e4c1;
    --text-secondary: #d4c4a0;
    --accent-color: #cd853f;
    --border-color: #5d4037;
}

/* å“åº”å¼è®¾è®¡ */
.panel {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    margin: 0.5rem;
    color: var(--text-primary);
    font-family: 'Georgia', serif;
    line-height: 1.6;
}

#story-panel {
    flex: 2;
    overflow-y: auto;
    max-height: 60vh;
}

#dialogue-panel {
    flex: 1;
    min-height: 200px;
}

/* æ‰“å­—æœºæ•ˆæœ */
.typewriter {
    overflow: hidden;
    border-right: 2px solid var(--accent-color);
    white-space: nowrap;
    animation: typing 2s steps(40) forwards,
               blink-caret 1s step-end infinite;
}

@keyframes typing {
    from { width: 0; }
    to { width: 100%; }
}

@keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: var(--accent-color); }
}
```

### 3. JavaScriptäº¤äº’å¢å¼º
```javascript
// ç°ä»£åŒ–UIç®¡ç†å™¨
class UIManager {
    constructor() {
        this.currentTheme = 'default';
        this.gameClient = new GameClient();
        this.setupEventListeners();
        this.initializeAnimations();
    }
    
    // æ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºæ–‡æœ¬
    async typewriterText(element, text, speed = 50) {
        element.innerHTML = '';
        element.classList.add('typewriter');
        
        for (let i = 0; i < text.length; i++) {
            element.innerHTML += text.charAt(i);
            await new Promise(resolve => setTimeout(resolve, speed));
        }
        
        element.classList.remove('typewriter');
    }
    
    // ä¸»é¢˜åˆ‡æ¢
    switchTheme(themeName) {
        document.documentElement.setAttribute('data-theme', themeName);
        this.currentTheme = themeName;
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem('gameTheme', themeName);
    }
    
    // åœºæ™¯è¿‡æ¸¡æ•ˆæœ
    async transitionToScene(sceneData) {
        const storyPanel = document.getElementById('story-panel');
        
        // æ·¡å‡ºæ•ˆæœ
        storyPanel.style.opacity = '0';
        await new Promise(resolve => setTimeout(resolve, 300));
        
        // æ›´æ–°å†…å®¹
        await this.updateSceneContent(sceneData);
        
        // æ·¡å…¥æ•ˆæœ
        storyPanel.style.opacity = '1';
    }
    
    // åŠ¨æ€èƒŒæ™¯æ•ˆæœï¼ˆå¯é€‰ï¼‰
    initializeParticleBackground() {
        // ä½¿ç”¨particles.jsåˆ›å»ºè¯—æ„çš„èƒŒæ™¯ç²’å­æ•ˆæœ
        particlesJS('game-container', {
            particles: {
                number: { value: 50 },
                color: { value: '#d4af37' },
                opacity: { value: 0.3 },
                size: { value: 2 },
                move: {
                    speed: 1,
                    direction: 'top'
                }
            }
        });
    }
}
```

---

## ğŸš€ ç¬¬ä¸€é˜¶æ®µå®æ–½è®¡åˆ’ï¼ˆä¿®è®¢ç‰ˆï¼‰

### ç¬¬1å‘¨ï¼šåŸºç¡€æ¶æ„æ­å»º
- **åç«¯æ¶æ„å¸ˆ**ï¼šæ­å»ºWebSocketæœåŠ¡å™¨ï¼Œå®šä¹‰APIè§„èŒƒ
- **å‰ç«¯å·¥ç¨‹å¸ˆ**ï¼šåˆ›å»ºåŸºç¡€HTML/CSS/JSç»“æ„ï¼Œå®ç°WebSocketå®¢æˆ·ç«¯
- **æ¸¸æˆç³»ç»Ÿå¼€å‘è€…**ï¼šè®¾è®¡ç©å®¶å’Œç‰©å“ç±»
- **éŸ³é¢‘å·¥ç¨‹å¸ˆ**ï¼šç ”ç©¶Web Audio APIä¸SFMLçš„åä½œæ–¹æ¡ˆ

### ç¬¬2å‘¨ï¼šæ ¸å¿ƒåŠŸèƒ½å®ç°
- **åç«¯æ¶æ„å¸ˆ**ï¼šå®Œæˆæ¸¸æˆçŠ¶æ€æœºå’Œäº‹ä»¶ç³»ç»Ÿ
- **å‰ç«¯å·¥ç¨‹å¸ˆ**ï¼šå®ç°UIçŠ¶æ€ç®¡ç†å’ŒåŸºç¡€è§†è§‰æ•ˆæœ
- **æ¸¸æˆç³»ç»Ÿå¼€å‘è€…**ï¼šå®Œæˆæ ¸å¿ƒæ¸¸æˆé€»è¾‘
- **éŸ³é¢‘å·¥ç¨‹å¸ˆ**ï¼šå®ç°éŸ³é¢‘ç®¡ç†ç³»ç»Ÿ

### ç¬¬3å‘¨ï¼šé›†æˆä¸ä¼˜åŒ–
- **å…¨å‘˜**ï¼šå‰åç«¯é›†æˆæµ‹è¯•
- **å‰ç«¯å·¥ç¨‹å¸ˆ**ï¼šä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œæ·»åŠ åŠ¨ç”»æ•ˆæœ
- **éŸ³é¢‘å·¥ç¨‹å¸ˆ**ï¼šé›†æˆéŸ³æ•ˆç³»ç»Ÿ
- **æ¼”ç¤ºå‡†å¤‡**ï¼šå®Œæ•´åŠŸèƒ½æ¼”ç¤º

---

## ğŸ’¡ æŠ€æœ¯ä¼˜åŠ¿

### 1. å¼€å‘æ•ˆç‡æå‡
- **å¹¶è¡Œå¼€å‘**ï¼šå‰åç«¯å›¢é˜Ÿå¯ç‹¬ç«‹å¼€å‘ï¼Œæé«˜æ•ˆç‡
- **æŠ€èƒ½ä¸“ä¸šåŒ–**ï¼šæ¯ä¸ªäººä¸“æ³¨è‡ªå·±æ“…é•¿çš„æŠ€æœ¯æ ˆ
- **ç°ä»£åŒ–å·¥å…·**ï¼šWebå¼€å‘ç”Ÿæ€æ›´æˆç†Ÿï¼Œè°ƒè¯•å’Œå¼€å‘å·¥å…·æ›´ä¸°å¯Œ

### 2. ç”¨æˆ·ä½“éªŒå¢å¼º
- **è§†è§‰æ•ˆæœ**ï¼šCSSåŠ¨ç”»ã€è¿‡æ¸¡æ•ˆæœã€ä¸»é¢˜åˆ‡æ¢
- **äº¤äº’ä½“éªŒ**ï¼šå“åº”å¼è®¾è®¡ã€ç°ä»£åŒ–ç•Œé¢
- **è·¨å¹³å°å…¼å®¹**ï¼šWebç•Œé¢å¤©ç„¶æ”¯æŒå¤šå¹³å°

### 3. å¯ç»´æŠ¤æ€§
- **èŒè´£åˆ†ç¦»**ï¼šUIé€»è¾‘ä¸æ¸¸æˆé€»è¾‘å®Œå…¨åˆ†ç¦»
- **æŠ€æœ¯æ ˆæˆç†Ÿ**ï¼šä½¿ç”¨ä¸šç•Œæˆç†Ÿçš„æŠ€æœ¯æ–¹æ¡ˆ
- **æ˜“äºæ‰©å±•**ï¼šåç»­å¯è½»æ¾æ·»åŠ æ–°åŠŸèƒ½

### 4. å­¦ä¹ ä»·å€¼
- **å…¨æ ˆå¼€å‘ç»éªŒ**ï¼šå‰ç«¯+åç«¯å®Œæ•´é¡¹ç›®ç»éªŒ
- **ç°ä»£åŒ–å¼€å‘æµç¨‹**ï¼šç¬¦åˆå½“å‰ä¼ä¸šå¼€å‘æ¨¡å¼
- **ä½œå“é›†äº®ç‚¹**ï¼šæŠ€æœ¯æ ˆç°ä»£åŒ–ï¼Œæ›´é€‚åˆå±•ç¤º

---

## âš ï¸ é£é™©ç®¡æ§

### ä¸»è¦æŒ‘æˆ˜
1. **å­¦ä¹ æ›²çº¿**ï¼šWebSocketé€šä¿¡ã€å‰åç«¯åè°ƒ
2. **è°ƒè¯•å¤æ‚åº¦**ï¼šæ¶‰åŠä¸¤ä¸ªè¿›ç¨‹çš„è°ƒè¯•
3. **éƒ¨ç½²å¤æ‚æ€§**ï¼šéœ€è¦åŒæ—¶è¿è¡Œå‰åç«¯

### åº”å¯¹ç­–ç•¥
1. **ç®€åŒ–é€šä¿¡**ï¼šä½¿ç”¨æ ‡å‡†JSONæ ¼å¼ï¼Œæ¸…æ™°çš„APIæ–‡æ¡£
2. **åˆ†é˜¶æ®µå®ç°**ï¼šå…ˆå®ç°åŸºç¡€é€šä¿¡ï¼Œå†æ·»åŠ å¤æ‚åŠŸèƒ½
3. **å……åˆ†æµ‹è¯•**ï¼šé‡ç‚¹æµ‹è¯•å‰åç«¯é€šä¿¡çš„ç¨³å®šæ€§

è¿™ä¸ªæ··åˆæ¶æ„æ–¹æ¡ˆå°†è®©æ‚¨çš„é¡¹ç›®åœ¨æŠ€æœ¯å…ˆè¿›æ€§å’Œç”¨æˆ·ä½“éªŒæ–¹é¢éƒ½è¾¾åˆ°ä¸“ä¸šæ°´å‡†ï¼
