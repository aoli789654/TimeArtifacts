# 《时光信物》项目文件结构

## 完整目录结构
```
TimeArtifacts/
├── CMakeLists.txt                    # 主构建文件
├── README.md                         # 项目说明
├── .gitignore                        # Git忽略文件
├── vcpkg.json                        # 依赖包配置
├── 
├── src/                              # 源代码目录
│   ├── main.cpp                      # 程序入口点
│   │
│   ├── core/                         # 核心引擎系统 (引擎架构师)
│   │   ├── GameEngine.h
│   │   ├── GameEngine.cpp
│   │   ├── StateManager.h
│   │   ├── StateManager.cpp
│   │   ├── EventManager.h
│   │   ├── EventManager.cpp
│   │   ├── DataLoader.h
│   │   ├── DataLoader.cpp
│   │   └── Events.h                  # 事件类型定义
│   │
│   ├── gameplay/                     # 游戏逻辑系统 (游戏系统开发者)
│   │   ├── Player.h
│   │   ├── Player.cpp
│   │   ├── Attribute.h
│   │   ├── Attribute.cpp
│   │   ├── Insight.h
│   │   ├── Insight.cpp
│   │   ├── Item.h
│   │   ├── Item.cpp
│   │   ├── ItemTypes.h
│   │   ├── ItemTypes.cpp
│   │   ├── Inventory.h
│   │   ├── Inventory.cpp
│   │   ├── Location.h
│   │   └── Location.cpp
│   │
│   ├── ui/                          # 用户界面系统 (UI工程师)
│   │   ├── UIManager.h
│   │   ├── UIManager.cpp
│   │   ├── TextRenderer.h
│   │   ├── TextRenderer.cpp
│   │   ├── DialogueSystem.h
│   │   ├── DialogueSystem.cpp
│   │   ├── ConsoleUI.h
│   │   ├── ConsoleUI.cpp
│   │   └── MenuSystem.h
│   │   └── MenuSystem.cpp
│   │
│   ├── audio/                       # 音频系统 (音频工程师)
│   │   ├── AudioManager.h
│   │   ├── AudioManager.cpp
│   │   ├── SoundEffect.h
│   │   ├── SoundEffect.cpp
│   │   ├── BackgroundMusic.h
│   │   └── BackgroundMusic.cpp
│   │
│   ├── features/                    # 特色功能系统 (音频工程师)
│   │   ├── Journal.h
│   │   ├── Journal.cpp
│   │   ├── Puzzle.h
│   │   ├── Puzzle.cpp
│   │   └── MiniGames.h
│   │   └── MiniGames.cpp
│   │
│   ├── states/                      # 游戏状态实现 (共同维护)
│   │   ├── MainMenuState.h
│   │   ├── MainMenuState.cpp
│   │   ├── ExploringState.h
│   │   ├── ExploringState.cpp
│   │   ├── DialogueState.h
│   │   ├── DialogueState.cpp
│   │   ├── JournalState.h
│   │   ├── JournalState.cpp
│   │   └── PuzzleState.h
│   │   └── PuzzleState.cpp
│   │
│   └── utils/                       # 工具类 (共同维护)
│       ├── ResourceManager.h
│       ├── ResourceManager.cpp
│       ├── FileUtils.h
│       ├── FileUtils.cpp
│       ├── StringUtils.h
│       ├── StringUtils.cpp
│       └── Logger.h
│       └── Logger.cpp
│
├── include/                         # 公共头文件
│   ├── core/
│   │   └── GameState.h              # 游戏状态接口
│   ├── common/
│   │   ├── Types.h                  # 通用类型定义
│   │   └── Constants.h              # 常量定义
│   └── config/
│       └── GameConfig.h             # 游戏配置
│
├── data/                           # JSON数据文件 (UI工程师负责结构设计)
│   ├── locations.json              # 场景数据
│   ├── items.json                  # 物品数据
│   ├── dialogues.json              # 对话数据
│   ├── characters.json             # 角色数据
│   ├── quests.json                 # 任务数据
│   └── config.json                 # 游戏配置
│
├── assets/                         # 游戏资源 (音频工程师负责组织)
│   ├── audio/
│   │   ├── music/                  # 背景音乐
│   │   │   ├── main_theme.ogg
│   │   │   ├── bookstore_ambient.ogg
│   │   │   └── old_street_night.ogg
│   │   └── sfx/                    # 音效
│   │       ├── page_turn.wav
│   │       ├── item_pickup.wav
│   │       ├── menu_select.wav
│   │       └── dialogue_beep.wav
│   │
│   └── data/                       # 其他数据文件
│       └── save_templates/         # 存档模板
│
├── tests/                          # 单元测试 (各自负责自己模块)
│   ├── CMakeLists.txt
│   ├── test_main.cpp
│   ├── core/
│   │   ├── test_StateManager.cpp
│   │   └── test_EventManager.cpp
│   ├── gameplay/
│   │   ├── test_Player.cpp
│   │   └── test_Inventory.cpp
│   └── utils/
│       └── test_StringUtils.cpp
│
├── docs/                           # 文档 (共同维护)
│   ├── api/                        # API文档
│   ├── design/                     # 设计文档
│   │   ├── architecture.md
│   │   ├── state_machine.md
│   │   └── event_system.md
│   ├── content/                    # 内容设计文档
│   │   ├── story_outline.md
│   │   ├── character_profiles.md
│   │   └── dialogue_guidelines.md
│   └── development/                # 开发文档
│       ├── coding_standards.md
│       ├── build_instructions.md
│       └── git_workflow.md
│
└── build/                          # 构建输出目录 (自动生成)
    └── (CMake生成的文件)
```

## 关键配置文件

### CMakeLists.txt (引擎架构师负责)
```cmake
cmake_minimum_required(VERSION 3.16)
project(TimeArtifacts VERSION 1.0.0)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 查找依赖包
find_package(fmt CONFIG REQUIRED)
find_package(nlohmann_json CONFIG REQUIRED)
find_package(sfml COMPONENTS audio CONFIG REQUIRED)

# 源文件收集
file(GLOB_RECURSE SOURCES "src/*.cpp")
file(GLOB_RECURSE HEADERS "src/*.h" "include/*.h")

# 创建可执行文件
add_executable(${PROJECT_NAME} ${SOURCES} ${HEADERS})

# 设置包含目录
target_include_directories(${PROJECT_NAME} PRIVATE 
    src/
    include/
)

# 链接库
target_link_libraries(${PROJECT_NAME} PRIVATE 
    fmt::fmt
    nlohmann_json::nlohmann_json
    sfml-audio
)

# 编译选项
if(MSVC)
    target_compile_options(${PROJECT_NAME} PRIVATE /W4)
else()
    target_compile_options(${PROJECT_NAME} PRIVATE -Wall -Wextra -pedantic)
endif()

# 复制资源文件到构建目录
file(COPY ${CMAKE_SOURCE_DIR}/data DESTINATION ${CMAKE_BINARY_DIR})
file(COPY ${CMAKE_SOURCE_DIR}/assets DESTINATION ${CMAKE_BINARY_DIR})
```

### vcpkg.json (引擎架构师负责)
```json
{
    "name": "time-artifacts",
    "version": "1.0.0",
    "dependencies": [
        "fmt",
        "nlohmann-json",
        "sfml"
    ]
}
```

### .gitignore
```
# 构建文件
build/
bin/
obj/
Debug/
Release/

# Visual Studio
.vs/
*.vcxproj.user
*.sln.docstates

# 临时文件
*.tmp
*.temp
*~

# 日志文件
*.log

# 用户配置
*.user
```

## 模块依赖关系

```
main.cpp
    ↓
GameEngine (core)
    ↓
StateManager (core) ← EventManager (core)
    ↓                      ↑
GameStates (states)       │
    ↓                      │
Player (gameplay) ←────────┘
UIManager (ui) ←───────────┘
AudioManager (audio) ←─────┘
Journal (features) ←───────┘
```

## 接口协调点

### 1. 事件接口 (Events.h)
各模块间通信的标准接口，所有人都需要了解

### 2. 游戏状态接口 (GameState.h)
状态机的标准接口，各状态实现者需要遵循

### 3. 数据结构规范 (JSON格式)
UI工程师制定，其他人遵循

### 4. 资源管理接口 (ResourceManager.h)
音频工程师制定，其他人使用

这个结构确保了：
- 模块职责清晰
- 接口标准统一
- 并行开发可行
- 代码易于维护
