# ã€Šæ—¶å…‰ä¿¡ç‰©ã€‹ç¬¬ä¸€é˜¶æ®µå¼€å‘è®¡åˆ’ï¼ˆä¿®è®¢ç‰ˆï¼‰
## æ ¸å¿ƒå¼•æ“ä¸æ¶æ„é˜¶æ®µï¼ˆç¬¬1-3å‘¨ï¼‰

### é¡¹ç›®ç›®æ ‡
æ­å»ºæ··åˆæ¶æ„çš„æŠ€æœ¯éª¨æ¶ï¼šC++åç«¯å¤„ç†æ¸¸æˆé€»è¾‘ï¼ŒJavaScript/Node.jså‰ç«¯è´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œä½“éªŒä¼˜åŒ–ã€‚å®ç°çŠ¶æ€æœºã€äº‹ä»¶ç®¡ç†å™¨å’Œæ•°æ®é€šä¿¡ç³»ç»Ÿã€‚

### ğŸš€ **æŠ€æœ¯æ¶æ„å‡çº§äº®ç‚¹**
- **å‰åç«¯åˆ†ç¦»**ï¼šC++ä¸“æ³¨æ¸¸æˆé€»è¾‘ï¼ŒJavaScriptä¸“æ³¨ç”¨æˆ·ä½“éªŒ
- **å®æ—¶é€šä¿¡**ï¼šé€šè¿‡WebSocketæˆ–å‘½åç®¡é“å®ç°å‰åç«¯é€šä¿¡
- **ç°ä»£åŒ–UI**ï¼šåˆ©ç”¨WebæŠ€æœ¯æ ˆæ‰“é€ ç²¾ç¾çš„æ–‡æœ¬å†’é™©ç•Œé¢
- **è·¨å¹³å°å…¼å®¹**ï¼šWebç•Œé¢å¤©ç„¶æ”¯æŒå¤šå¹³å°

---

## ä¸€ã€å›¢é˜Ÿåˆ†å·¥ä¸èŒè´£

### 1. åç«¯å¼•æ“æ¶æ„å¸ˆ (Backend Engine Architect) â­**å‡çº§è§’è‰²**
**æ ¸å¿ƒèŒè´£ï¼š** æ­å»ºC++åç«¯æ¶æ„ï¼Œè´Ÿè´£æ¸¸æˆé€»è¾‘å’Œå‰åç«¯é€šä¿¡
**ç¬¬ä¸€é˜¶æ®µä»»åŠ¡ï¼š**
- è®¾è®¡å¹¶å®ç°æ¸¸æˆçŠ¶æ€æœºç³»ç»Ÿ
- åˆ›å»ºäº‹ä»¶ç®¡ç†å™¨ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰
- **æ–°å¢ï¼šå»ºç«‹WebSocketæœåŠ¡å™¨æˆ–è¿›ç¨‹é—´é€šä¿¡ç³»ç»Ÿ**
- **æ–°å¢ï¼šè®¾è®¡å‰åç«¯APIæ¥å£è§„èŒƒ**
- å»ºç«‹JSONæ•°æ®åŠ è½½ç³»ç»Ÿ
- é…ç½®CMakeæ„å»ºç³»ç»Ÿ
- åˆ¶å®šä»£ç è§„èŒƒå’ŒGitå·¥ä½œæµ

**å…·ä½“äº¤ä»˜ç‰©ï¼š**
```cpp
// æ ¸å¿ƒæ–‡ä»¶
src/core/GameEngine.h/.cpp       // ä¸»å¼•æ“ç±»
src/core/StateManager.h/.cpp     // çŠ¶æ€æœºç®¡ç†å™¨
src/core/EventManager.h/.cpp     // äº‹ä»¶ç³»ç»Ÿ
src/core/DataLoader.h/.cpp       // JSONæ•°æ®åŠ è½½å™¨
src/core/WebSocketServer.h/.cpp  // ğŸ†• WebSocketé€šä¿¡æœåŠ¡å™¨
src/core/APIHandler.h/.cpp       // ğŸ†• å‰åç«¯APIå¤„ç†å™¨
include/core/GameState.h         // æ¸¸æˆçŠ¶æ€åŸºç±»æ¥å£
include/core/APITypes.h          // ğŸ†• APIæ•°æ®ç±»å‹å®šä¹‰
CMakeLists.txt                   // æ„å»ºé…ç½®
```

### 2. æ¸¸æˆç³»ç»Ÿå¼€å‘è€… (Gameplay Developer)
**æ ¸å¿ƒèŒè´£ï¼š** å®ç°æ¸¸æˆæ ¸å¿ƒé€»è¾‘å’Œç©å®¶ç³»ç»Ÿ
**ç¬¬ä¸€é˜¶æ®µä»»åŠ¡ï¼š**
- è®¾è®¡å¹¶å®ç°Playerç±»åŠå±æ€§ç³»ç»Ÿ
- åˆ›å»ºç‰©å“ç³»ç»Ÿçš„ç±»å±‚æ¬¡ç»“æ„
- å®ç°æ´å¯Ÿ(Insight)ç³»ç»Ÿ
- å»ºç«‹æ¸¸æˆè§„åˆ™å¼•æ“
- è®¾è®¡å­˜æ¡£/è¯»æ¡£ç³»ç»Ÿæ¥å£

**å…·ä½“äº¤ä»˜ç‰©ï¼š**
```cpp
// æ ¸å¿ƒæ–‡ä»¶
src/gameplay/Player.h/.cpp       // ç©å®¶ç±»
src/gameplay/Attribute.h/.cpp    // å±æ€§ç³»ç»Ÿ
src/gameplay/Insight.h/.cpp      // æ´å¯Ÿç³»ç»Ÿ
src/gameplay/Item.h/.cpp         // ç‰©å“åŸºç±»
src/gameplay/ItemTypes.h/.cpp    // å…·ä½“ç‰©å“ç±»å‹
src/gameplay/Inventory.h/.cpp    // ç‰©å“æ ç³»ç»Ÿ
```

### 3. å‰ç«¯UI/UXå·¥ç¨‹å¸ˆ (Frontend UI/UX Engineer) â­**å‡çº§è§’è‰²**
**æ ¸å¿ƒèŒè´£ï¼š** ä½¿ç”¨ç°ä»£WebæŠ€æœ¯æ„å»ºç²¾ç¾çš„ç”¨æˆ·ç•Œé¢
**ç¬¬ä¸€é˜¶æ®µä»»åŠ¡ï¼š**
- è®¾è®¡å¹¶å®ç°åŸºäºWebçš„æ¸¸æˆç•Œé¢ï¼ˆHTML/CSS/JavaScriptï¼‰
- åˆ›å»ºä¸C++åç«¯çš„é€šä¿¡æ¡¥æ¢ï¼ˆWebSocketå®¢æˆ·ç«¯ï¼‰
- å®ç°å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒä¸åŒå±å¹•å°ºå¯¸
- è®¾è®¡JSONæ•°æ®ç»“æ„è§„èŒƒ
- åˆ›å»ºå®æ—¶UIçŠ¶æ€ç®¡ç†ç³»ç»Ÿ

**å…·ä½“äº¤ä»˜ç‰©ï¼š**
```
frontend/
â”œâ”€â”€ index.html                   // ä¸»ç•Œé¢
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ main.css                // ä¸»æ ·å¼
â”‚   â”œâ”€â”€ themes/                 // ä¸»é¢˜ç³»ç»Ÿ
â”‚   â””â”€â”€ components/             // ç»„ä»¶æ ·å¼
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js                 // ä¸»é€»è¾‘
â”‚   â”œâ”€â”€ gameClient.js          // ä¸C++é€šä¿¡
â”‚   â”œâ”€â”€ uiManager.js           // UIçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ dialogueRenderer.js   // å¯¹è¯æ¸²æŸ“
â”‚   â””â”€â”€ components/            // UIç»„ä»¶
â””â”€â”€ assets/                     // å‰ç«¯èµ„æº
data/locations.json             // åœºæ™¯æ•°æ®ç»“æ„
data/dialogues.json             // å¯¹è¯æ•°æ®ç»“æ„
```

### 4. éŸ³é¢‘ä¸ç‰¹è‰²åŠŸèƒ½è´Ÿè´£äºº (Audio & Features Developer)
**æ ¸å¿ƒèŒè´£ï¼š** éŸ³é¢‘ç³»ç»Ÿå’Œç‹¬ç‰¹æ¸¸æˆåŠŸèƒ½
**ç¬¬ä¸€é˜¶æ®µä»»åŠ¡ï¼š**
- ç ”ç©¶å¹¶é›†æˆSFMLéŸ³é¢‘åº“
- è®¾è®¡éŸ³é¢‘ç®¡ç†å™¨æ¶æ„
- åˆ›å»ºæ—¥è®°ç³»ç»Ÿæ¡†æ¶
- è®¾è®¡å°æ¸¸æˆ/è°œé¢˜ç³»ç»Ÿæ¥å£
- å‡†å¤‡éŸ³é¢‘èµ„æºç®¡ç†ç³»ç»Ÿ

**å…·ä½“äº¤ä»˜ç‰©ï¼š**
```cpp
// æ ¸å¿ƒæ–‡ä»¶
src/audio/AudioManager.h/.cpp    // éŸ³é¢‘ç®¡ç†å™¨
src/features/Journal.h/.cpp      // æ—¥è®°ç³»ç»Ÿ
src/features/Puzzle.h/.cpp       // è°œé¢˜ç³»ç»ŸåŸºç±»
src/utils/ResourceManager.h/.cpp // èµ„æºç®¡ç†å™¨
assets/audio/                    // éŸ³é¢‘èµ„æºç›®å½•ç»“æ„
```

---

## äºŒã€æ··åˆæ¶æ„è®¾è®¡ ğŸ”„

### 1. æ•´ä½“æ¶æ„å›¾ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰
```
TimeArtifacts/
â”œâ”€â”€ backend/                     # ğŸ†• C++åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒå¼•æ“ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ gameplay/           # æ¸¸æˆé€»è¾‘ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ audio/             # éŸ³é¢‘ç³»ç»Ÿï¼ˆåç«¯å¤„ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ features/          # ç‰¹è‰²åŠŸèƒ½ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ api/               # ğŸ†• å‰åç«¯API
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ main.cpp           # åç«¯æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ include/               # å…¬å…±å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ tests/                 # åç«¯å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ CMakeLists.txt         # åç«¯æ„å»ºé…ç½®
â”œâ”€â”€ frontend/                   # ğŸ†• Webå‰ç«¯
â”‚   â”œâ”€â”€ index.html             # ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ css/                   # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                    # JavaScripté€»è¾‘
â”‚   â”œâ”€â”€ components/            # UIç»„ä»¶
â”‚   â”œâ”€â”€ assets/               # å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ package.json          # ğŸ†• Node.jsä¾èµ–ç®¡ç†
â”‚   â””â”€â”€ webpack.config.js     # ğŸ†• æ‰“åŒ…é…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ shared/                    # ğŸ†• å…±äº«èµ„æº
â”‚   â”œâ”€â”€ data/                 # JSONæ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ assets/              # å…±äº«æ¸¸æˆèµ„æº
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

### 2. æ ¸å¿ƒç±»è®¾è®¡

#### GameEngine (ä¸»å¼•æ“)
```cpp
class GameEngine {
private:
    std::unique_ptr<StateManager> stateManager;
    std::unique_ptr<EventManager> eventManager;
    std::unique_ptr<DataLoader> dataLoader;
    bool isRunning;

public:
    void initialize();
    void run();
    void shutdown();
    void changeState(std::unique_ptr<GameState> newState);
};
```

#### StateManager (çŠ¶æ€ç®¡ç†å™¨)
```cpp
class GameState {
public:
    virtual ~GameState() = default;
    virtual void enter() = 0;
    virtual void handleInput(const std::string& input) = 0;
    virtual void update(float deltaTime) = 0;
    virtual void render() = 0;
    virtual void exit() = 0;
};

class StateManager {
private:
    std::unique_ptr<GameState> currentState;
    std::unique_ptr<GameState> nextState;

public:
    void changeState(std::unique_ptr<GameState> newState);
    void update(float deltaTime);
    void render();
    void handleInput(const std::string& input);
};
```

#### EventManager (äº‹ä»¶ç³»ç»Ÿ)
```cpp
class Event {
public:
    virtual ~Event() = default;
    virtual std::string getType() const = 0;
};

class EventManager {
private:
    std::map<std::string, std::vector<std::function<void(const Event&)>>> subscribers;

public:
    void subscribe(const std::string& eventType, std::function<void(const Event&)> callback);
    void publish(std::unique_ptr<Event> event);
    void unsubscribe(const std::string& eventType, /* callback identifier */);
};
```

---

## ä¸‰ã€ç¬¬ä¸€é˜¶æ®µé‡Œç¨‹ç¢‘

### ç¬¬1å‘¨æœ«ç›®æ ‡ï¼ˆæ··åˆæ¶æ„ç‰ˆï¼‰
- **åç«¯æ¶æ„å¸ˆ**: å®ŒæˆWebSocketæœåŠ¡å™¨åŸºç¡€æ¡†æ¶ï¼Œå®šä¹‰å‰åç«¯APIè§„èŒƒ
- **æ¸¸æˆç³»ç»Ÿå¼€å‘è€…**: å®ŒæˆPlayerç±»åŸºç¡€è®¾è®¡ï¼Œå®ç°å±æ€§ç³»ç»Ÿ
- **å‰ç«¯UIå·¥ç¨‹å¸ˆ**: å®ŒæˆåŸºç¡€Webç•Œé¢ï¼Œå®ç°WebSocketå®¢æˆ·ç«¯è¿æ¥
- **éŸ³é¢‘å·¥ç¨‹å¸ˆ**: å®ŒæˆéŸ³é¢‘ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼Œç ”ç©¶Web Audioä¸SFMLé›†æˆ

### ç¬¬2å‘¨æœ«ç›®æ ‡
- **åç«¯æ¶æ„å¸ˆ**: å®Œæˆäº‹ä»¶ç³»ç»Ÿï¼Œå®ç°å‰åç«¯å®æ—¶é€šä¿¡
- **æ¸¸æˆç³»ç»Ÿå¼€å‘è€…**: å®Œæˆç‰©å“ç³»ç»Ÿè®¾è®¡ï¼Œå®ç°æ´å¯Ÿç³»ç»Ÿ
- **å‰ç«¯UIå·¥ç¨‹å¸ˆ**: å®ŒæˆUIçŠ¶æ€ç®¡ç†ï¼Œå®ç°åŠ¨æ€å†…å®¹æ¸²æŸ“
- **éŸ³é¢‘å·¥ç¨‹å¸ˆ**: å®ŒæˆéŸ³é¢‘ç®¡ç†å™¨ï¼Œå®ç°åŸºç¡€éŸ³æ•ˆæ’­æ”¾

### ç¬¬3å‘¨æœ«ç›®æ ‡ï¼ˆç¬¬ä¸€é˜¶æ®µå®Œæˆï¼‰
- **æ‰€æœ‰æˆå‘˜**: å‰åç«¯é›†æˆæµ‹è¯•ï¼Œç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **æ¼”ç¤ºç›®æ ‡**: 
  - ğŸŒ Webç•Œé¢æ­£å¸¸å¯åŠ¨å¹¶æ˜¾ç¤ºç²¾ç¾çš„æ¸¸æˆä¸»ç•Œé¢
  - ğŸ”„ å‰åç«¯é€šä¿¡ç¨³å®šï¼ŒçŠ¶æ€åŒæ­¥æ­£å¸¸
  - ğŸ® ç©å®¶å¯ä»¥åœ¨Webç•Œé¢ä¸­è¿›è¡Œæ¸¸æˆäº¤äº’
  - ğŸ¨ ç•Œé¢æ”¯æŒä¸»é¢˜åˆ‡æ¢ï¼Œå…·å¤‡åŸºç¡€åŠ¨ç”»æ•ˆæœ
  - ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒä¸åŒå±å¹•å°ºå¯¸
  - ğŸ”Š éŸ³æ•ˆç³»ç»Ÿæ­£å¸¸å·¥ä½œ
  - ğŸ“Š å®æ—¶æ˜¾ç¤ºæ¸¸æˆçŠ¶æ€ï¼ˆå±æ€§ã€ç‰©å“æ ç­‰ï¼‰

---

## å››ã€æŠ€æœ¯é€‰å‹ä¸å·¥å…·ï¼ˆæ··åˆæ¶æ„ç‰ˆï¼‰

### åç«¯æŠ€æœ¯æ ˆ
- **nlohmann/json**: JSONè§£æ
- **websocketpp**: WebSocketæœåŠ¡å™¨ ğŸ†•
- **SFML Audio**: éŸ³é¢‘å¤„ç†
- **CMake**: æ„å»ºç³»ç»Ÿ
- **vcpkg**: C++åŒ…ç®¡ç†å™¨

### å‰ç«¯æŠ€æœ¯æ ˆ ğŸ†•
- **Node.js**: å¼€å‘å·¥å…·é“¾
- **Vite**: å¿«é€Ÿå¼€å‘æœåŠ¡å™¨å’Œæ‰“åŒ…å·¥å…·
- **TypeScript**: ç±»å‹å®‰å…¨ï¼ˆå¯é€‰ï¼‰
- **ç°ä»£CSS**: Gridã€Flexboxã€åŠ¨ç”»

### å…±äº«å¼€å‘å·¥å…·
- **Git**: ç‰ˆæœ¬æ§åˆ¶
- **Visual Studio Code**: æ¨èIDEï¼ˆæ”¯æŒå‰åç«¯å¼€å‘ï¼‰
- **Postman/WebSocketå®¢æˆ·ç«¯**: APIæµ‹è¯•å·¥å…· ğŸ†•

### ç¼–ç è§„èŒƒ
- C++17æ ‡å‡†
- ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†å†…å­˜
- éµå¾ªRAIIåŸåˆ™
- ç±»åä½¿ç”¨PascalCase
- å‡½æ•°åä½¿ç”¨camelCase
- å¸¸é‡ä½¿ç”¨UPPER_SNAKE_CASE

---

## äº”ã€é£é™©ç®¡æ§

### ä¸»è¦é£é™©ç‚¹
1. **æŠ€æœ¯å­¦ä¹ æ›²çº¿**: ncursesã€SFMLç­‰åº“çš„å­¦ä¹ æ—¶é—´
2. **å›¢é˜Ÿåä½œ**: ä¸åŒæ¨¡å—é—´çš„æ¥å£è®¾è®¡
3. **æ—¶é—´ç®¡ç†**: åŠŸèƒ½å®ç°å¤æ‚åº¦è¶…å‡ºé¢„æœŸ

### åº”å¯¹ç­–ç•¥
1. **åˆ†é˜¶æ®µå®ç°**: å…ˆç”¨ç®€å•æ–¹æ¡ˆï¼ˆå¦‚{fmt}ï¼‰ï¼ŒåæœŸå‡çº§
2. **æ¥å£å…ˆè¡Œ**: ä¼˜å…ˆå®šä¹‰æ¸…æ™°çš„æ¨¡å—æ¥å£
3. **æ¯æ—¥ç«™ä¼š**: ä¿æŒå›¢é˜Ÿæ²Ÿé€šï¼ŒåŠæ—¶å‘ç°é—®é¢˜

---

## å…­ã€ä¸‹é˜¶æ®µé¢„è§ˆ

ç¬¬ä¸€é˜¶æ®µå®Œæˆåï¼Œç¬¬äºŒé˜¶æ®µå°†ä¸“æ³¨äºï¼š
- å®Œæ•´æ¸¸æˆå†…å®¹å¡«å……
- é«˜çº§UIå®ç°ï¼ˆncursesï¼‰
- éŸ³é¢‘å†…å®¹é›†æˆ
- æ¸¸æˆå¹³è¡¡æ€§è°ƒè¯•

è¿™ä¸ªè®¡åˆ’ç¡®ä¿å›¢é˜Ÿåœ¨æœ‰é™æ—¶é—´å†…å»ºç«‹ç¨³å›ºçš„æŠ€æœ¯åŸºç¡€ï¼Œä¸ºåç»­åŠŸèƒ½æ‰©å±•å¥ å®šåŸºçŸ³ã€‚
